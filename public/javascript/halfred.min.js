!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.halfred=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./lib/parser"),e=a("./lib/resource"),f=!1;b.exports={parse:function(a){return(new d).parse(a,f)},enableValidation:function(a){f=null!=a?a:!0},disableValidation:function(){f=!1},Resource:e}},{"./lib/parser":3,"./lib/resource":4}],2:[function(a,b,c){"use strict";function d(){arguments.length>=1?this._array=arguments[0]:this._array=[]}d.prototype.array=function(){return this._array},d.prototype.isEmpty=function(a){return 0===this._array.length},d.prototype.push=function(a){var b=this._array.slice(0);return b.push(a),new d(b)},d.prototype.pop=function(){var a=this._array.slice(0,this._array.length-1);return new d(a)},d.prototype.peek=function(){if(this.isEmpty())throw new Error("can't peek on empty stack");return this._array[this._array.length-1]},b.exports=d},{}],3:[function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a)return a;var d=f(a._links,b,c.push("_links")),e=g(d),j=h(a._embedded,b,c.push("_embedded")),k=new t(d,e,j,b);return i(a,k),k._original=a,k}function f(a,b,c){return a=j(a,l,b,c),(null==a||null==a.self)&&p("Resource does not have a self link",b,c),a}function g(a){return a?a.curies:[]}function h(a,b,c){var d=j(a,o,b,c);return null==d?d:(Object.keys(d).forEach(function(a){d[a]=d[a].map(function(d){var f=null!=b?[]:null,g=e(d,f,c.push(a));return g._original=d,g})}),d)}function i(a,b){Object.keys(a).forEach(function(c){"_links"!==c&&"_embedded"!==c&&(b[c]=a[c])})}function j(a,b,c,d){if(null==a)return a;var e={};return Object.keys(a).forEach(function(f){e[f]=k(f,a[f],b,c,d)}),e}function k(a,b,c,d,e){return m(b)?b.map(function(b){return c(a,b,d,e)}):[c(a,b,d,e)]}function l(a,b,c,d){if(!n(b))throw new Error("Link object is not an actual object: "+b+" ["+typeof b+"]");var e=r(b);return Object.keys(v).forEach(function(b){null==e[b]&&(v[b].required&&p("Link misses required property "+b+".",c,d.push(a)),null!=v[b].defaultValue&&(e[b]=v[b].defaultValue))}),e.deprecation&&q("Warning: Link "+s(d.push(a))+" is deprecated, see "+e.deprecation),e.templated!==!0&&e.templated!==!1&&(e.templated=!1),c?(e.href&&e.href.indexOf("{")>=0&&!e.templated&&p('Link seems to be an URI template but its "templated" property is not set to true.',c,d.push(a)),e):e}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"object"==typeof a}function o(a,b){return b}function p(a,b,c){b&&b.push({path:s(c),message:a})}function q(a){"undefined"!=typeof console&&"function"==typeof console.log&&console.log(a)}function r(a){var b={};return Object.keys(a).forEach(function(c){b[c]=a[c]}),b}function s(a){for(var b="$.",c=0;c<a.array().length;c++)b+=a.array()[c]+".";return b=b.substring(0,b.length-1)}var t=a("./resource"),u=a("./immutable_stack"),v={href:{required:!0,defaultValue:null},templated:{required:!1,defaultValue:!1},type:{required:!1,defaultValue:null},deprecation:{required:!1,defaultValue:null},name:{required:!1,defaultValue:null},profile:{required:!1,defaultValue:null},title:{required:!1,defaultValue:null},hreflang:{required:!1,defaultValue:null}};d.prototype.parse=function(a,b){var c=b?[]:null;return e(a,c,new u)},b.exports=d},{"./immutable_stack":2,"./resource":4}],4:[function(a,b,c){"use strict";function d(a,b,c,d){this._links=a||{},this._initCuries(b),this._embedded=c||{},this._validation=d||[]}function e(a,b){return null!=a?a[b]:null}function f(a,b,c){c=c||0;var d=e(a,b);return null!=d&&d.length>=1?d[c]:null}d.prototype._initCuries=function(a){if(this._curiesMap={},a){this._curies=a;for(var b=0;b<this._curies.length;b++){var c=this._curies[b];this._curiesMap[c.name]=c}}else this._curies=[];this._preResolveCuries()},d.prototype._preResolveCuries=function(){this._resolvedCuriesMap={};for(var a=0;a<this._curies.length;a++){var b=this._curies[a];if(b.name)for(var c in this._links)"curies"!==c&&this._preResolveCurie(b,c)}},d.prototype._preResolveCurie=function(a,b){var c=(this._links[b],b.split(/:(.+)/)),d=c[0];if(a.name===d)if(a.templated&&c.length>=1){var e=a.href.replace(/(.*){(.*)}(.*)/,"$1"+c[1]+"$3");this._resolvedCuriesMap[e]=b}else this._resolvedCuriesMap[a.href]=b},d.prototype.allLinkArrays=function(){return this._links},d.prototype.linkArray=function(a){return e(this._links,a)},d.prototype.link=function(a,b){return f(this._links,a,b)},d.prototype.hasCuries=function(a){return this._curies.length>0},d.prototype.curieArray=function(a){return this._curies},d.prototype.curie=function(a){return this._curiesMap[a]},d.prototype.reverseResolveCurie=function(a){return this._resolvedCuriesMap[a]},d.prototype.allEmbeddedResourceArrays=function(){return this._embedded},d.prototype.embeddedResourceArray=function(a){return e(this._embedded,a)},d.prototype.embeddedResource=function(a,b){return f(this._embedded,a,b)},d.prototype.original=function(){return this._original},d.prototype.validationIssues=function(){return this._validation},d.prototype.allLinks=d.prototype.allLinkArrays,d.prototype.allEmbeddedArrays=d.prototype.allEmbeddedResources=d.prototype.allEmbeddedResourceArrays,d.prototype.embeddedArray=d.prototype.embeddedResourceArray,d.prototype.embedded=d.prototype.embeddedResource,d.prototype.validation=d.prototype.validationIssues,b.exports=d},{}]},{},[1])(1)});